var defaultMenuFadeDelay=100;var mq=window.matchMedia("(min-width: 1080px)");$(document).ready(function(){$('#mainMenu ul.main li > a').each(function(i){var index=(i+1)*10;$(this).attr('tabindex',index);var targetSubMenu=$(this).data("target-sub-menu");var targetSubMenuLinks=$("#"+targetSubMenu+" a");$(targetSubMenuLinks).each(function(j){$(this).attr('tabindex',index+(j+1));});});$('#myAccountMenu a').each(function(i){var index=parseInt($("#myAccountMenuLink").attr("tabindex"),10);$(this).attr('tabindex',index+(i+1));});$('#languageMenu a').each(function(i){var index=parseInt($("#languageSwitchLink").attr("tabindex"),10);$(this).attr('tabindex',index+(i+1));});$('#mainMenu ul.main li a.tab').on('click',function(event){var isClickedTabExpanded=$(this).hasClass('expanded');$('#mainMenu ul.main li a.expanded').removeClass('expanded');$('#mainMenu ul.main li a.selected').removeClass('hidden');hideSubMenu();hideLanguageMenu();hideMyAccountMenu();if(isClickedTabExpanded){hideSubMenuBar();return;}
$('#mainMenu ul.main li a.selected').addClass('hidden');$(this).addClass('expanded');if(($(this).is(":focus")||$(this).is(event.target))&&$(this).css("outline-style")!="none"){$(this).css("outline","none");$(this).on("blur",function(){$(this).off("blur").css("outline","");});}
if(mq.matches||!$("html").hasClass("mobile-friendly")){var targetSubMenu=$(this).data("target-sub-menu");var targetSubMenuDiv=$("#"+targetSubMenu);targetSubMenuDiv.show();showSubMenuBar($(this),true);}else{showMobileSubMenu($(this));}
event.preventDefault();});$(window).resize(function(){hideSubMenuBar();});$(document).on('click',function(event){if($(event.target).closest('.main.menu').length>0){return;}
if($(event.target).closest('.submenus').length>0){return;}
$('#mainMenu ul.main li a.expanded').removeClass('expanded');$('#mainMenu ul.main li a.selected').removeClass('hidden');hideSubMenuBar();hideLanguageMenu();hideMyAccountMenu();});$('#mainMenu div div a').click(function(event){if($(this).hasClass('disabled')){event.preventDefault();}});initLanguageMenu();initMyAccountMenu();});function hideSubMenuBar(){$('#mainMenu ul.main li a.expanded').removeClass('expanded');$('#mainMenu ul.main li a.selected').removeClass('hidden');$('#mainMenu .submenus').fadeOut(defaultMenuFadeDelay);}
function showSubMenuBar(parentMenuItem,setFocusOnFirstElement){var submenus=$('#mainMenu .submenus');if($("html").hasClass("isBuyingOrg")){submenus.css({left:0,top:0});submenus.position({my:"left top",at:"left bottom+16",of:parentMenuItem})}
if(setFocusOnFirstElement){submenus.fadeIn(defaultMenuFadeDelay,function(){var targetSubMenu=$("#mainMenu ul.main li a.expanded").data("target-sub-menu");$("#"+targetSubMenu+" > ul > li:first-child > a:first-child").focus();});}else{submenus.fadeIn(defaultMenuFadeDelay);}}
function showMobileSubMenu($clickedLink){var $subMenu=$clickedLink.next("ul");var otherSubMenus=$("#mainMenu ul.main li a.tab + ul:visible, #mainMenu ul.main li #languageSwitchLink + #languageMenu:visible").not($subMenu);if(!$subMenu.hasClass('.velocity-animating')){otherSubMenus.velocity("finish").velocity("slideUp");if($subMenu.is(":visible")){$subMenu.velocity("finish").velocity("slideUp");}else{$subMenu.velocity("finish").velocity("slideDown");}}}
function hideSubMenu(){$('#mainMenu div.sub').hide();}
var languageMenuDialog=null;function initLanguageMenu(){$(document).on('click','#languageSwitchLink',function(){if(mq.matches||!$("html").hasClass("mobile-friendly")){if(languageMenuDialog!=null&&languageMenuDialog.is(':ui-dialog')&&languageMenuDialog.dialog("isOpen")){hideLanguageMenu();return false;}
if(languageMenuDialog==null){languageMenuDialog=$('#languageMenu').dialog({dialogClass:'languageMenu',autoOpen:false,draggable:false,modal:false,closeOnEscape:true,resizable:false,width:'auto',position:{my:"left top",at:"left bottom",of:$("#languageSwitchLink")},open:function(){$(document).on('click',function(e){hideLanguageMenu();});}});}
if(languageMenuDialog!=null&&languageMenuDialog.is(':ui-dialog')){languageMenuDialog.dialog("open");}}else{if(languageMenuDialog&&languageMenuDialog.is(':ui-dialog')){languageMenuDialog.dialog("destroy");languageMenuDialog=null;}
showMobileSubMenu($(this));}
hideMyAccountMenu();hideSubMenuBar();return false;});}
var myAccountMenuDialog=null;function initMyAccountMenu(){$(document).on('click','#myAccountMenuLink',function(){if(myAccountMenuDialog!=null&&myAccountMenuDialog.dialog("isOpen")){hideMyAccountMenu();return false;}
if(myAccountMenuDialog==null){myAccountMenuDialog=$('#myAccountMenu').dialog({dialogClass:'myAccountMenu',autoOpen:false,draggable:false,modal:false,closeOnEscape:true,resizable:false,width:'auto',position:{my:"right top",at:"right bottom",of:$("#myAccountMenuLink")},open:function(){$(document).on('click',function(e){hideMyAccountMenu();});}});}
hideLanguageMenu();hideSubMenuBar();myAccountMenuDialog.dialog("open");return false;});}
function hideLanguageMenu(){if(languageMenuDialog!=null&&languageMenuDialog.is(':ui-dialog')){$(languageMenuDialog).dialog('close');}}
function hideMyAccountMenu(){if(myAccountMenuDialog!=null){$(myAccountMenuDialog).dialog('close');}}